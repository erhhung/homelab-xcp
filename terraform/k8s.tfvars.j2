# this file is generated by Ansible.
# manual changes may be overwritten!

vm_specs = [
{% for host, vm in vm_config.items() %}
{%   if host is search('^(rancher|k8s[0-9]+)$') %}
{#     https://docs.ansible.com/ansible/latest/collections/ovirt/ovirt/convert_to_bytes_filter.html #}
{%     set memory_gb = vm.memory    | ovirt.ovirt.convert_to_bytes / 2**30 %}
{%     set   disk_gb = vm.disk.size | ovirt.ovirt.convert_to_bytes / 2**30 %}
  {
    name        = "{{ vm.name }}"
    description = "{{ vm.desc }}"
    host        = "{{ host_affinities[host] }}"
    vcpus       = {{  vm.vcpus }}
    memory_gb   = {{ memory_gb | int }}
    disk_gb     = {{   disk_gb | int }}
    lv_gb       = {{  vm.disk.lv | regex_replace('[^0-9.]*$','') }}
    ip_address  = "{{ vm.ip }}"
  },
{%   endif %}
{% endfor  %}
]
